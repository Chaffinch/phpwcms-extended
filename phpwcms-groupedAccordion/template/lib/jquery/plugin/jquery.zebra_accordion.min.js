/* Zebra_Accordion for phpwcms v1.2.2.1 * (c) 2011-2013 Stefan Gabos <contact@stefangabos.ro> * enhanced by Oliver Georgi * GNU LESSER GENERAL PUBLIC LICENSE */
(function(e){e.Zebra_Accordion=function(t,n){var r={"switch":"dt",content:"dd",animate_opacity:!0,collapsible:!1,expanded_class:"Zebra_Accordion_Expanded",hide_speed:400,scroll_speed:600,show_speed:400,show:0,toggle_on_mouseover:!1,onBeforeClose:null,onBeforeOpen:null,onClose:null,onOpen:null},i=this,s=null,o=null,u=[],a=[];i.settings={};var f=function(){i.settings=e.extend({},r,n);var f=e(t);s=e(i.settings.switch,f);o=e(i.settings.content,f);c();l();if(i.settings.show!==!1)if(i.settings.collapsible&&(e.isArray(i.settings.show)||i.settings.show===!0))if(i.settings.show===!0)for(var h=0;h<s.length;h++)i.show(h,!0,!0);else e.each(i.settings.show,function(e){i.show(i.settings.show[e],!0,!0)});else i.show(i.settings.show,!0,!0);e(window).bind("resize",function(){var t=[];s.each(function(n){var r=e(this);r.hasClass(i.settings.expanded_class)&&t.push(n);r.attr("style",u[n].style)});c(!1);o.each(function(t){e(this).attr("style",a[t].style)});l();t.length>0&&e.each(t,function(e){i.show(t[e],!0,!0)})})};i.show=function(t,n,r){if(null!==(new String(t)).match(/^[0-9]+$/)&&t>=0&&t<=a.length-1){var f=e(s[t]),l=e(o[t]),c=a[t];i.settings.onBeforeOpen&&typeof i.settings.onBeforeOpen=="function"&&i.settings.onBeforeOpen(t,f,l);if(i.settings.collapsible&&l.height()>0)return i.hide(t,n);i.settings.collapsible||o.each(function(e){e!=t&&i.hide(e,n)});f.addClass(i.settings.expanded_class);l.css("display","block");l.stop();l.animate({height:c.height,paddingTop:c.paddingTop,paddingBottom:c.paddingBottom,marginTop:c.marginTop,marginBottom:c.marginBottom,opacity:1},n?0:i.settings.show_speed,function(){i.settings.onOpen&&typeof i.settings.onOpen=="function"&&i.settings.onOpen(t,f,l);if(!r){var n=Math.round(f.offset().top),s=u[t].height,o=c.outerHeight,a=n+s+o,h=e(window).height(),p=e(window).scrollTop(),d=null;if(a>h+p){d=a-h;d>n&&(d=n)}n<p&&(d=n);d&&e("html, body").animate({scrollTop:d},i.settings.scroll_speed)}})}};i.hide=function(t,n){if(null!==(new String(t)).match(/^[0-9]+$/)&&t>=0&&t<=a.length-1){var r=e(s[t]),u=e(o[t]),f=a[t];i.settings.onBeforeClose&&typeof i.settings.onBeforeClose=="function"&&i.settings.onBeforeClose(t,r,u);r.removeClass(i.settings.expanded_class);u.stop();u.css({borderTopWidth:0,borderBottomWidth:0});u.animate({height:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0,opacity:i.settings.animate_opacity?0:1},n?0:i.settings.hide_speed,function(){i.settings.onClose&&typeof i.settings.onClose=="function"&&i.settings.onClose(t,r,u);e(this).css({display:"none",visibility:"visible",borderTopWidth:f.borderTopWidth,borderBottomWidth:f.borderBottomWidth})})}};var l=function(){a=[];o.each(function(t){var n=e(this);n.css({visibility:"hidden",display:"block"});a.push({height:n.height(),outerHeight:n.outerHeight(),paddingTop:h(n.css("paddingTop")),paddingBottom:h(n.css("paddingBottom")),marginTop:h(n.css("marginTop")),marginBottom:h(n.css("marginBottom")),borderTopWidth:h(n.css("borderTopWidth")),borderBottomWidth:h(n.css("borderBottomWidth")),style:n.attr("style")});i.hide(t,!0)})},c=function(t){u=[];s.each(function(n){var r=e(this),s=!i.settings.collapsible&&i.settings.toggle_on_mouseover?"mouseover":"click";u.push({height:r.outerHeight(),style:r.attr("style")});undefined===t&&r.bind(s,function(){i.show(n)})})},h=function(e){e=parseInt(e,10);return isNaN(e)?0:e};f()}})(jQuery);